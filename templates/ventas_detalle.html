<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Factura {{ factura.code }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container my-4">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">Factura: {{ factura.code }}</h5>
    </div>
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-6">
          <h6><strong>Cliente:</strong> {{ factura.customer.name }}</h6>
          <p>
            <strong>DUI:</strong> {{ factura.customer.dui or 'N/A' }}<br>
            <strong>Correo:</strong> {{ factura.customer.email or 'N/A' }}<br>
            <strong>DirecciÃ³n:</strong> {{ factura.customer.address or 'N/A' }}
          </p>
        </div>
        <div class="col-md-6 text-end">
          <p><strong>Fecha:</strong> {{ factura.created_at.strftime('%d/%m/%Y') if factura.created_at else 'â€”' }}</p>
          <p><strong>Vendedor:</strong> {{ factura.user_id }}</p>
        </div>
      </div>

      <table class="table table-bordered align-middle text-center">
        <thead class="table-primary">
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          {% for item in factura.items %}
          <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ "%.2f"|format(item.quantity) }}</td>
            <td>${{ "%.2f"|format(item.price) }}</td>
            <td>${{ "%.2f"|format(item.subtotal) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="text-end mt-3">
        <p><strong>Subtotal:</strong> ${{ "%.2f"|format(factura.subtotal) }}</p>
        <p><strong>IVA (13%):</strong> ${{ "%.2f"|format(factura.tax_total) }}</p>
        <h5><strong>Total a pagar:</strong> ${{ "%.2f"|format(factura.total) }}</h5>
      </div>

      <div class="text-end mt-4">
       <a href="{{ url_for('generar_factura_pdf', id=factura.id) }}" class="btn btn-success" target="_blank">
  ðŸ“„ Descargar PDF</a>

      </div>
    </div>
  </div>
</div>

</body>
</html>
